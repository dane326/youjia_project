<!-- 通用CSS -->
<head th:fragment=header(title) xmlns:th="http://www.w3.org/1999/xhtml">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<title th:text="${title}"></title>
	<link rel="shortcut icon" href="favicon.ico">
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
	<link th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
	<!-- bootstrap-table 表格插件样式 -->
	<link th:href="@{/ajax/libs/bootstrap-table/bootstrap-table.min.css}" rel="stylesheet"/>
	<link th:href="@{/css/animate.css}" rel="stylesheet"/>
	<link th:href="@{/css/style.css}" rel="stylesheet"/>
	<link th:href="@{/gsh/css/gsh-ui.css}" rel="stylesheet"/>
	<link th:href="@{/gsh/css/common.css}" rel="stylesheet"/>
	<link th:href="@{/gsh/css/layui.css}" rel="stylesheet"/>
	<link th:href="@{/gsh/css/laypage.css}" rel="stylesheet"/>
</head>

<!-- 通用JS -->
<div th:fragment="footer">
	<a id="scroll-up" href="#" class="btn btn-sm display"><i class="fa fa-angle-double-up"></i></a>
	<script th:src="@{/js/jquery.min.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
	<!-- bootstrap-table 表格插件 -->
	<script th:src="@{/ajax/libs/bootstrap-table/bootstrap-table.min.js?v=20191219}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/locale/bootstrap-table-zh-CN.min.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/mobile/bootstrap-table-mobile.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/toolbar/bootstrap-table-toolbar.min.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/columns/bootstrap-table-fixed-columns.js}"></script>
	<!-- jquery-validate 表单验证插件 -->
	<script th:src="@{/ajax/libs/validate/jquery.validate.min.js}"></script>
	<script th:src="@{/ajax/libs/validate/messages_zh.min.js}"></script>
	<script th:src="@{/ajax/libs/validate/jquery.validate.extend.js}"></script>
	<!-- jquery-validate 表单树插件 -->
	<script th:src="@{/ajax/libs/bootstrap-treetable/bootstrap-treetable.js}"></script>
	<!-- jquery-export 表格导出插件 -->
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/export/bootstrap-table-export.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/export/tableExport.js}"></script>
	<!-- 遮罩层 -->
	<script th:src="@{/ajax/libs/blockUI/jquery.blockUI.js}"></script>
    <script th:src="@{/ajax/libs/iCheck/icheck.min.js}"></script>
	<script th:src="@{/ajax/libs/layer/layer.min.js}"></script>
	<script th:src="@{/ajax/libs/layui/layui.js}"></script>
	<script th:src="@{/gsh/js/common.js?v=4.2.0}"></script>
	<script th:src="@{/gsh/js/gsh-ui.js?v=4.2.0}"></script>
	<script th:src="@{/system/factory/js/factorydict-ui.js?v=4.2.0}"></script>
	<script th:src="@{/gsh/js/laypage.js}"></script>
	<script th:src="@{/gsh/js/vue.min.js}"></script>
	<script th:inline="javascript"> var ctx = [[@{/}]]; </script>
</div>

<!-- ztree树插件 -->
<div th:fragment="ztree-css">
    <link th:href="@{/ajax/libs/jquery-ztree/3.5/css/metro/zTreeStyle.css}" rel="stylesheet"/>
</div>
<div th:fragment="ztree-css-ext">
	<link th:href="@{/ajax/libs/jquery-ztree/3.5/css/metro/zTreeStyle-ext.css}" rel="stylesheet"/>
</div>
<div th:fragment="ztree-js">
    <script th:src="@{/ajax/libs/jquery-ztree/3.5/js/jquery.ztree.all-3.5.js}"></script>
</div>

<!-- select2下拉框插件 -->
<div th:fragment="select2-css">
    <link th:href="@{/ajax/libs/select2/select2.min.css}" rel="stylesheet"/>
    <link th:href="@{/ajax/libs/select2/select2-bootstrap.css}" rel="stylesheet"/>
</div>
<div th:fragment="select2-js">
    <script th:src="@{/ajax/libs/select2/select2.min.js}"></script>
</div>

<!-- bootstrap-select下拉框插件 -->
<div th:fragment="bootstrap-select-css">
    <link th:href="@{/ajax/libs/bootstrap-select/bootstrap-select.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstrap-select-js">
    <script th:src="@{/ajax/libs/bootstrap-select/bootstrap-select.js}"></script>
</div>

<!-- datetimepicker日期和时间插件 -->
<div th:fragment="datetimepicker-css">
    <link th:href="@{/ajax/libs/datapicker/bootstrap-datetimepicker.min.css}" rel="stylesheet"/>
</div>
<div th:fragment="datetimepicker-js">
    <script th:src="@{/ajax/libs/datapicker/bootstrap-datetimepicker.min.js}"></script>
</div>

<!-- ui布局插件 -->
<div th:fragment="layout-latest-css">
    <link th:href="@{/ajax/libs/jquery-layout/jquery.layout-latest.css}" rel="stylesheet"/>
</div>
<div th:fragment="layout-latest-js">
    <script th:src="@{/ajax/libs/jquery-layout/jquery.layout-latest.js}"></script>
</div>

<!-- summernote富文本编辑器插件 -->
<div th:fragment="summernote-css">
    <link th:href="@{/ajax/libs/summernote/summernote.css}" rel="stylesheet"/>
	<link th:href="@{/ajax/libs/summernote/summernote-bs3.css}" rel="stylesheet"/>
</div>
<div th:fragment="summernote-js">
    <script th:src="@{/ajax/libs/summernote/summernote.min.js}"></script>
	<script th:src="@{/ajax/libs/summernote/summernote-zh-CN.js}"></script>
	<script th:src="@{/ajax/libs/summernote/plugin/kityformula/kf-editor.js}"></script>
	<script th:src="@{/ajax/libs/summernote/plugin/specialchars/specialchars.js}"></script>
</div>

<!-- cropbox图像裁剪插件 -->
<div th:fragment="cropbox-css">
    <link th:href="@{/ajax/libs/cropbox/cropbox.css}" rel="stylesheet"/>
</div>
<div th:fragment="cropbox-js">
    <script th:src="@{/ajax/libs/cropbox/cropbox.js}"></script>
</div>

<!-- jasny功能扩展插件 -->
<div th:fragment="jasny-bootstrap-css">
    <link th:href="@{/ajax/libs/jasny/jasny-bootstrap.min.css}" rel="stylesheet"/>
</div>
<div th:fragment="jasny-bootstrap-js">
    <script th:src="@{/ajax/libs/jasny/jasny-bootstrap.min.js}"></script>
</div>

<!-- fileinput文件上传插件 -->
<div th:fragment="bootstrap-fileinput-css">
    <link th:href="@{/ajax/libs/bootstrap-fileinput/fileinput.min.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstrap-fileinput-js">
    <script th:src="@{/ajax/libs/bootstrap-fileinput/fileinput.min.js}"></script>
</div>

<!-- 扩展fileinput文件上传插件 以及验证 -->
<div th:fragment="accessories-bootstrap-fileinput-extend-js">
	<script th:src="@{/gsh/js/accessories-bootstrap-fileinput-extend.js}"></script>
	<script th:src="@{/gsh/js/accessories.validate.extend.js}"></script>
</div>

<!-- duallistbox双列表框插件 -->
<div th:fragment="bootstrap-duallistbox-css">
    <link th:href="@{/ajax/libs/duallistbox/bootstrap-duallistbox.min.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstrap-duallistbox-js">
    <script th:src="@{/ajax/libs/duallistbox/bootstrap-duallistbox.min.js}"></script>
</div>

<!-- suggest搜索自动补全 -->
<div th:fragment="bootstrap-suggest-js">
    <script th:src="@{/ajax/libs/suggest/bootstrap-suggest.min.js}"></script>
</div>

<!-- typeahead搜索自动补全 -->
<div th:fragment="bootstrap-typeahead-js">
    <script th:src="@{/ajax/libs/typeahead/bootstrap3-typeahead.min.js}"></script>
</div>

<!-- jsonview格式化和语法高亮JSON格式数据查看插件 -->
<div th:fragment="jsonview-css">
    <link th:href="@{/ajax/libs/jsonview/jquery.jsonview.css}" rel="stylesheet"/>
</div>
<div th:fragment="jsonview-js">
    <script th:src="@{/ajax/libs/jsonview/jquery.jsonview.js}"></script>
</div>

<!-- jquery.steps表单向导插件 -->
<div th:fragment="jquery-steps-css">
    <link th:href="@{/ajax/libs/staps/jquery.steps.css}" rel="stylesheet"/>
</div>
<div th:fragment="jquery-steps-js">
    <script th:src="@{/ajax/libs/staps/jquery.steps.min.js}"></script>
</div>

<!-- jquery-ui -->
<div th:fragment="jquery-ui">
	<script th:src="@{/js/jquery-ui-1.10.4.min.js}"></script>
</div>


<!-- ECharts百度统计图表插件 -->
<div th:fragment="echarts-js">
    <script th:src="@{/ajax/libs/report/echarts/echarts-all.js}"></script>
</div>

<!-- peity图表组合插件 -->
<div th:fragment="peity-js">
    <script th:src="@{/ajax/libs/report/peity/jquery.peity.min.js}"></script>
</div>

<!-- sparkline线状图插件 -->
<div th:fragment="sparkline-js">
    <script th:src="@{/ajax/libs/report/sparkline/jquery.sparkline.min.js}"></script>
</div>

<!-- 表格拖拽插件 -->
<div th:fragment="bootstrap-table-reorder-js">
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/reorder/bootstrap-table-reorder.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/reorder/jquery.tablednd.js}"></script>
</div>
<!-- 表格行内编辑插件 -->
<div th:fragment="bootstrap-editable-css">
	<link th:href="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-editable.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstrap-table-editable-js">
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-editable.min.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-table-editable.js}"></script>
</div>
<div th:fragment="mathjax-275">
	<script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        	MMLorHTML: { prefer: { Firefox: "MML" } },
            showProcessingMessages: false, //关闭js加载过程信息
            messageStyle: "none", //不显示信息
            extensions: ["tex2jax.js"],
            jax: ["input/TeX", "output/SVG"],
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ], //行内公式选择符
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ], //段内公式选择符
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'] //避开某些标签
            },
            "HTML-CSS": {
                availableFonts: ["STIX","TeX"], //可选字体
                showMathMenu: false //关闭右击菜单显示
            },
			"SVG": {
                showMathMenu: false //关闭右击菜单显示
            }
        });        
	</script>
	<style>
		.MathJax, .MathJax_SVG {outline: 0;}
		/* .MathJax span{font-size: 15px;} */
	</style>
	<!-- <script src="http://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
	<script src="http://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS_SVG"></script>
	<!-- <script th:src="@{/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML}"></script> -->
	<script>
		$(document).ready(function () {
			$('<div style="display: none;" id="mathJaxMMLHidden">\${}\$</div>').appendTo($(document.body))
		});
		/**
		 * 提取img的latex,转出成mml
		 */
        function imgToLatexAndMML(str){
            var $html = $("<div>" + str + "</div>");
		    // 解析公式编辑器生成的
		    $('.kfformula', $html).each(function(){
		        $that = $(this);
                var mathJaxText = MathJax.Hub.getAllJax("mathJaxMMLHidden")[0];
                var tex = $that.data("latex");
                if(tex){
                    mathJaxText.Text(tex);
                    toMathML(mathJaxText, function (mml) {
                        if(mml){
                            $that.replaceWith("<span class=\"latex\" data-mathml='" + mml + "'>$" + tex + "$</span>");
                        }                    
                    });
                }                                                  
            });
            // 解析class="latex"的公式
            $('.latex', $html).each(function(){
                if(!$(this).attr("data-mathml")){
                    var mathml = $(this).find(".MathJax_SVG").attr("data-mathml");
                    var tex = $(this).find('script[type="math/tex"]').html();
                    if(mathml && tex){
                        $(this).replaceWith("<span class=\"latex\" data-mathml='" + mathml + "'>$" + tex + "$</span>");
                    }
                }                                    
            });
            return $html.html();
        }		
        function toMathML(jax, callback) {
            var mml;
            try {
               mml = jax.root.toMathML("");
            } catch (err) {
               if (!err.restart) { throw err } // an actual error
               return MathJax.Callback.After([toMathML, jax, callback], err.restart);
            }
            MathJax.Callback(callback)(mml);
        };
        function formatLatexInput(value){
            var $value = $("<div>" + value + "</div>");
            $('.latex', $value).each(function(){
                $(this).removeAttr("data-mathml");                    
            });
            return $value.html();
        }
	</script>
</div>

<!-- 剪切板 -->
<div th:fragment="clipboard-min-js">
	<script th:src="@{/gsh/js/clipboard.min.js}"></script>
</div>

<div th:fragment="bootstrap-tooltip">
	<script th:src="@{/ajax/libs/bootstrap-tooltip/bootstrap-tooltip.min.js}"></script>
</div>

<!-- 页面向导 -->
<div th:fragment="bootstro-css">
	<link th:href="@{/ajax/libs/bootstro/bootstro.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstro-js">
	<script th:src="@{/ajax/libs/bootstro/bootstro.js}"></script>
</div>

<!-- 拓扑图 -->
<div th:fragment="orgCharts-css">
	<link th:href="@{/ajax/libs/orgCharts/orgCharts.css}" rel="stylesheet"/>
</div>
<div th:fragment="orgCharts-js">
	<script th:src="@{/ajax/libs/orgCharts/orgCharts.js}"></script>
</div>

<!-- 表格行内编辑插件 -->
<div th:fragment="bootstrap-editable-css">
	<link th:href="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-editable.css}" rel="stylesheet"/>
</div>
<div th:fragment="bootstrap-table-editable-js">
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-editable.min.js}"></script>
	<script th:src="@{/ajax/libs/bootstrap-table/extensions/editable/bootstrap-table-editable.js}"></script>
</div>
